<div *ngIf="product$ | async as product" class="product-tile-list row" [attr.data-testing-sku]="product.sku">
  <div class="col-3 col-md-2">
    <div class="product-image-container">
      <a [routerLink]="product | ishProductRoute: category" queryParamsHandling="merge">
        <ish-product-image [product]="product" imageType="S" class="product-image"></ish-product-image>
      </a>
      <ish-product-label [product]="product"></ish-product-label>
    </div>
  </div>

  <div class="col-9 col-md-10">
    <div class="row">
      <div class="col-md-7 col-xs-12">
        <a
          *ngIf="configuration.displayName"
          class="product-title"
          [routerLink]="product | ishProductRoute: category"
          queryParamsHandling="merge"
          >{{ product.name }}</a
        >

        <ish-product-rating *ishFeature="'rating'" [product]="product"></ish-product-rating>

        <ish-product-id *ngIf="configuration.displaySKU" [product]="product"></ish-product-id>

        <div *ngIf="configuration.displayDescription" class="product-description">{{ product.shortDescription }}</div>

        <ng-container *ishFeature="'tacton'; else displayInteractions">
          <ng-container *ishIsTactonProduct="product; else displayInteractions"></ng-container>
        </ng-container>

        <ng-template #displayInteractions>
          <ish-product-promotion
            *ngIf="configuration.displayPromotions"
            [product]="product"
            displayType="simpleWithDetail"
          ></ish-product-promotion>

          <div class="product-tile-actions btn-group">
            <ish-lazy-product-add-to-quote
              *ngIf="configuration.displayAddToQuote"
              displayType="icon"
              class="btn-link"
            ></ish-lazy-product-add-to-quote>
            <ish-product-add-to-compare
              *ngIf="configuration.displayAddToCompare"
              displayType="icon"
              class="btn-link"
            ></ish-product-add-to-compare>
            <ish-lazy-product-add-to-wishlist
              *ngIf="configuration.displayAddToWishlist"
              displayType="icon"
              class="btn-link"
            ></ish-lazy-product-add-to-wishlist>
            <ish-lazy-product-add-to-order-template
              *ngIf="configuration.displayAddToOrderTemplate"
              displayType="icon"
              class="btn-link"
            ></ish-lazy-product-add-to-order-template>
          </div>
        </ng-template>
      </div>

      <div class="col-12 col-md-5 text-md-right">
        <ng-container *ishFeature="'tacton'; else standardInformation">
          <ng-container *ishIsTactonProduct="product; else standardInformation"></ng-container>
        </ng-container>

        <ng-template #standardInformation>
          <ish-product-price
            *ngIf="configuration.displayPrice"
            [product]="product"
            [showInformationalPrice]="true"
          ></ish-product-price>
          <ish-product-inventory
            *ngIf="configuration.displayInventory && !isMasterProduct(product)"
            [product]="product"
          ></ish-product-inventory>
          <ish-product-shipment
            *ngIf="configuration.displayShipment && !isMasterProduct(product)"
            [product]="product"
          ></ish-product-shipment>
        </ng-template>

        <div *ngIf="configuration.displayVariations" class="product-variation-container">
          <ng-container *ishFeature="'advancedVariationHandling'; else normalVariationDisplay">
            <ish-product-variation-display
              *ngIf="isVariationProduct(product)"
              [product]="product"
            ></ish-product-variation-display>
          </ng-container>
          <ng-template #normalVariationDisplay>
            <ng-container *ngIf="isVariationProduct(product)">
              <ng-container *ngIf="configuration.readOnly; else variationSelect">
                <ish-product-variation-display [product]="product"></ish-product-variation-display>
              </ng-container>
            </ng-container>
          </ng-template>
        </div>

        <ng-template #variationSelect>
          <ish-product-variation-select></ish-product-variation-select>
        </ng-template>

        <div class="product-list-actions-container">
          <ng-container *ishFeature="'tacton'; else standardInteractions">
            <ish-lazy-tacton-configure-product
              *ishIsTactonProduct="product; else standardInteractions"
              [product]="product"
              displayType="list-button"
            ></ish-lazy-tacton-configure-product>
          </ng-container>

          <ng-template #standardInteractions>
            <ng-container *ngIf="!isMasterProduct(product); else masterProductActions">
              <div class="product-form form-horizontal row">
                <ng-container *ngIf="configuration.readOnly; else quantityInput">
                  <div class="action-container col-12 col-xl-7">
                    <span *ngIf="configuration.displayQuantity"
                      >{{ 'product.quantity.label' | translate }}: {{ quantity$ | async }}</span
                    >
                  </div>
                </ng-container>
                <ng-template #quantityInput>
                  <div class="action-container col-6 offset-md-6 col-lg-5 offset-lg-0">
                    <ish-product-quantity *ngIf="configuration.displayQuantity"></ish-product-quantity>
                  </div>
                </ng-template>

                <div
                  *ngIf="configuration.displayAddToBasket"
                  class="action-container addtocart-container col-12 col-lg-7"
                >
                  <ish-product-add-to-basket></ish-product-add-to-basket>
                </div>
              </div>
            </ng-container>

            <ng-template #masterProductActions>
              <div class="action-container">
                <a
                  [routerLink]="product | ishProductRoute: category"
                  queryParamsHandling="merge"
                  class="btn btn-primary"
                  role="button"
                >
                  {{ 'product.choose_variation.link' | translate }}
                </a>
              </div>
            </ng-template>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
